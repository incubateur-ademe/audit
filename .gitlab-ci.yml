image: node:20

stages:
- lint
- test

lint:
  stage: lint
  script:
    - yarn
    - yarn lint

test:
  stage: test
  script:
    - yarn
    - yarn test-ci
  artifacts:
    reports:
      coverage_report:
        coverage_format: cobertura
        path: coverage/cobertura-coverage.xml

sast:
  stage: test

include:
  - template: Security/SAST.gitlab-ci.yml

